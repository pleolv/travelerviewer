<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>travelerviewer Demo</title>

<style>
    body { font-family: Arial, sans-serif; margin: 0; padding: 20px; background: #f9f9f9; }
    h1 { text-align: center; margin-bottom: 20px; }
    .video { background: white; padding: 20px; margin-bottom: 20px; border-radius: 10px; box-shadow: 0 2px 6px rgba(0,0,0,0.1); }
    .comments { margin-top: 10px; padding-left: 20px; }
    .comment { margin-bottom: 5px; }
    .webhook-event { background: #e6ffe6; padding: 10px; margin-bottom: 10px; border-left: 4px solid #28a745; border-radius: 4px; }
    .footer { margin-top: 40px; text-align: center; color: #666; }
    .sandbox { padding: 10px; background: #e6f3ff; border-left: 4px solid #007bff; border-radius: 4px; margin-bottom: 20px; }
    .buttons { text-align: center; margin: 20px 0; }
    .buttons button { margin: 0 10px; padding: 10px 20px; font-size: 16px; cursor: pointer; border-radius: 5px; border: none; color: white; }
    .login { background-color: #25F4EE; color: #000; }
    .share { background-color: #ff0050; }
</style>
</head>

<body>

<h1>travelerviewer — TikTok Demo</h1>

<div class="sandbox">
    Demo showing videos, comments, Webhook events, and TikTok integration buttons.
</div>

<div class="buttons">
    <button class="login" onclick="mockLogin()">Login with TikTok</button>
    <button class="share" onclick="mockShare()">Share to TikTok</button>
</div>

<div id="content"></div>

<h2>Real-time Webhook Events</h2>
<div id="webhook-events"></div>

<div class="footer">
    Demo complete — shows videos, comments, Webhook events, and TikTok buttons.
</div>

<script>
    // Sandbox videos & comments
    const myVideos = [
        { id: "1", title: "Trip to Paris" },
        { id: "2", title: "Hiking Adventure" }
    ];
    const videoComments = {
        "1": [
            { user: "alice", text: "Beautiful!" },
            { user: "bob", text: "Amazing shots!" }
        ],
        "2": [
            { user: "carol", text: "Wow, looks fun!" },
            { user: "dave", text: "Great view!" }
        ]
    };
    const content = document.getElementById("content");
    myVideos.forEach(video => {
        const div = document.createElement("div");
        div.className = "video";
        div.innerHTML = `<h2>${video.title}</h2>`;
        const commentsDiv = document.createElement("div");
        commentsDiv.className = "comments";
        videoComments[video.id].forEach(c => {
            const cDiv = document.createElement("div");
            cDiv.className = "comment";
            cDiv.textContent = `${c.user}: ${c.text}`;
            commentsDiv.appendChild(cDiv);
        });
        div.appendChild(commentsDiv);
        content.appendChild(div);
    });

    // Real-time Webhook events via SSE
    const webhookContainer = document.getElementById("webhook-events");
    const evtSource = new EventSource('/events');
    evtSource.onmessage = function(e) {
        const data = JSON.parse(e.data);
        const div = document.createElement("div");
        div.className = "webhook-event";
        div.textContent = JSON.stringify(data, null, 2);
        webhookContainer.prepend(div);
    };

    // Mock TikTok Login
    function mockLogin() {
        alert("Mock TikTok Login successful!\n(User would normally authenticate via Login Kit)");
    }

    // Mock TikTok Share
    function mockShare() {
        const videoTitle = myVideos[0].title;
        alert(`Mock Share successful!\n(Video '${videoTitle}' would be shared via Share Kit)`);
    }
</script>

</body>
</html>
